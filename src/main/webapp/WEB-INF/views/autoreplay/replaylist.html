<!DOCTYPE html><html lang="en"><head><meta name="decorator" content="default" /><title>团队列表</title></head><body>	<div class="page-content">		<div class="page-header">			<h1>				自动回复管理			</h1>		</div>		<!-- /.page-header -->		<div class="row">			<div class="col-xs-12">				<!-- PAGE CONTENT BEGINS -->				<form class="form-inline" action="${ctx}/replay/search?pageid=1"					method="post">					<div class="row">						<div class="col-xs-12 col-sm-12">							<div class="input-group">								<button class="btn btn-sm btn-purple" onclick="clean()" data-toggle="modal"									data-target="#replay-add-modal" >									<i class="icon-edit bigger-120"></i>新增回复								</button> 								关键词：<input name="keywords" value="${weixinreplays.keywords}"									type="text" class="input-small" /> 																<button type="submit" class="btn btn-purple btn-sm">									查询 <i class="icon-search icon-on-right bigger-110"></i>								</button>							</div>						</div>					</div>				</form>				<div class="row">					<div class="col-xs-12">						<div class="table-responsive" style="margin-top: 5px">							<table id="sample-table-1"								class="table table-striped table-bordered table-hover">								<thead>									<tr>										<!-- <th class="center"><label> <input type="checkbox"												class="ace" /> <span class="lbl"></span>										</label></th> -->										<th>关键字</th>										<th>回复内容</th>										<th></th>									</tr>								</thead>								<tbody>																		<#list weixinreplayslist as replay>									<tr>										<!-- <td class="center"><label> <input type="checkbox"												class="ace" /> <span class="lbl"></span>										</label></td> -->										<td>${replay.keywords}</td>										<td>${replay.content}</td>										<td>											<div												class="visible-md visible-lg hidden-sm hidden-xs btn-group">												<button class="btn btn-sm btn-purple" data-rel="tooltip"  data-toggle="modal"													data-target="#replay-change-modal" 													onclick="editReplay('${replay.id}')">													<span> <i class="icon-edit bigger-120"></i>编辑													</span>												</button>												<button class="btn btn-sm btn-danger"													onclick="deleteReplay('${replay.id}')"													data-rel="tooltip">													<span> <i class="icon-trash bigger-120"></i>删除													</span>												</button>											</div>										</td>									</tr>								 </#list>								</tbody>							</table>						</div>						<#include "/common/common_page.html">						<!-- /.table-responsive -->					</div>					<!-- /span -->				</div>				<!-- /row -->				<!-- PAGE CONTENT ENDS -->			</div>			<!-- /.col -->		</div>		<!-- /.row -->	</div>	<!-- /.page-content -->	<a href="#" id="btn-scroll-up"		class="btn-scroll-up btn btn-sm btn-inverse"> <i		class="icon-double-angle-up icon-only bigger-110"></i>	</a><div id="replay-add-modal" class="modal fade" tabindex="-1"		role="dialog">		<div class="modal-dialog modal-lg">			<div class="modal-content">				<div class="modal-header">					<button type="button" class="close" data-dismiss="modal">&times;</button>					<h4 class="blue bigger">添加回复</h4>				</div>									 		<div class="modal-body overflow-visible">					<form id="replay-add-form" class="form-horizontal"						role="form" method="post" 						enctype="multipart/form-data">				<div class="form-group">							<label class="col-sm-3 control-label no-padding-right">						</div>						<div class="space-4"></div>					<div class="form-group">						<label class="col-sm-3 control-label no-padding-right">								输入关键字： </label>							<div class="col-sm-8">								<input type="text" id="word" name="word" maxlength="50" 									class="col-xs-10 col-sm-5"  />									<input type="button" value="添加" onclick="getaddkeyword()" class="btn btn-primary btn-sm">						</div>						</div>						<div class="space-4"></div>						<div class="form-group">							<label class="col-sm-3 control-label no-padding-right">								关键字： </label>							<div class="col-sm-8">								<input type="text" readonly="readonly" id="keyword"  name="keyword" maxlength="50" 									class="col-xs-10 col-sm-5" required />									<input type="button" value ="清空" onclick="$('#keyword').val('')"  class="btn btn-primary btn-sm">							</div>						</div>						<div class="space-4"></div>						<div class="form-group">							<label class="col-sm-3 control-label no-padding-right">								回答： </label>							<div class="col-sm-8">								<textarea  name="content" id="content" rows="12"	cols="46" 							style="margin: 0px; height: 414px; width: 413px;"	required></textarea>							</div>						</div> 						<div class="modal-footer">							<button class="btn btn-sm btn-info" 								onclick="addreplays()">								<i class="icon-ok"></i> 提交							</button>							<button class="btn btn-sm" data-dismiss="modal">								<i class="icon-remove"></i> 取消							</button>						</div>					</from>					</div>							</div>	</div></div><div id="replay-change-modal" class="modal fade" tabindex="-1"		role="dialog">		<div class="modal-dialog modal-lg">			<div class="modal-content">				<div class="modal-header">					<button type="button" class="close" data-dismiss="modal">&times;</button>					<h4 class="blue bigger">修改回复</h4>				</div>									 		<div class="modal-body overflow-visible">				<form id="replay-add-form" class="form-horizontal"						role="form" method="post" 						enctype="multipart/form-data">				<div class="form-group">							<label class="col-sm-3 control-label no-padding-right">						</div>						<div class="space-4"></div>					<div class="form-group">						<label class="col-sm-3 control-label no-padding-right">								输入关键字： </label>							<div class="col-sm-8">								<input type="text" id="keyword2" width="100" maxlength="50" 									class="col-xs-10 col-sm-5"  />								<input type="button" value="添加" onclick="addkeyword()" class="btn btn-primary btn-sm">						</div>						</div>						<div class="space-4"></div>						<div class="form-group">							<label class="col-sm-3 control-label no-padding-right">								关键字： </label>							<div class="col-sm-8">							<table id="keytable" style="margin: 0px; height: 30px; width: 413px;">							<tbody>							</tbody>							</table>							</div>						</div>						<div class="space-4"></div>						<div class="form-group">							<label class="col-sm-3 control-label no-padding-right">								回答： </label>							<div class="col-sm-8">								<textarea  name="content2" id="content2" rows="11"	cols="42" 							style="margin: 0px; height: 414px; width: 413px;"	required></textarea>							<input type="hidden" id="replayid" value="">							<input value="保存回复内容" type="button" onclick="updatereplay()" class="btn btn-primary btn-sm" >							</div>						</div> 						<div class="modal-footer">							<!-- button class="btn btn-sm btn-info" 								onclick="addreplays()">								<i class="icon-ok"></i> 提交							</button> -->							<button class="btn btn-sm" data-dismiss="modal" onclick="window.location.reload()">								<i class="icon-remove"></i> 取消							</button>						</div>					</from>					</div>							</div>	</div></div>	<!-- inline scripts related to this page -->	<script charset="utf-8"		src="${ctx}/static/kindeditor/kindeditor-min.js"></script>	<script charset="utf-8" src="${ctx}/static/kindeditor/zh_CN.js"></script>	<script type="text/javascript">		$(function() {			$("#team-add-form").validate();			$("#team-add-form").bind(					'submit',					function() {						//校验表单						if (!$(this).valid()) {							return false;						}																	return true;					});			$.messager.model = {				ok : {					text : "确定",					classed : 'btn-info'				},				cancel : {					text : "取消",					classed : 'btn-error'				}			};		});		function updatereplay(){			var replayid =  $("#replayid").val();			var content = $("#content2").val(); 			$.ajax({		        type:"post", //请求方式		        url:"${ctx}/replay/updatereplay" , //请求路径		        data:{"id":replayid,"content":content},		        cache: false,		        dataType: 'json',		      success:function(data){   		        //弹出返回过来的List对象		        alert(data["msg"]);		        window.location.reload();		                },		      error: function(){		          alert("请求出错！");		      }		      });		}		function editReplay(id){			$("#keytable tbody").html('');			$.ajax({		        type:"post", //请求方式		        url:"${ctx}/replay/getreplay" , //请求路径		        data:{"id":id},		        cache: false, 		        dataType: 'json',		      success:function(data){   		        //弹出返回过来的List对象		        $("#replayid").val(data.replayid);		        $("#content2").val(data.replay); 		        var keywordlist = data["keywordlist"];		      	 keywordlist =  eval(keywordlist);		       for(var i in keywordlist)  		       {  		    	   i = eval(keywordlist[i]);		    	   $("#keytable tbody").prepend('<tr><td>'+i["keyword"]+'<td>'+'<td> <input type="button" value ="删除" onclick="deletekeyword('+i["id"]+')"  class="btn btn-primary btn-sm"><td></tr>');		       } 		        		                },		      error: function(){		          alert("请求出错！");		      }		      });		}				function clean(){			$("#keyword").val("");			$("#content").val("");		}		function deletekeyword(id){			var replayid =  $("#replayid").val();			$.ajax({		        type:"post", //请求方式		        url:"${ctx}/replay/deletekeyword" , //请求路径		        data:{"id":id},		        cache: false,		        dataType: 'json',		      success:function(data){   		        //弹出返回过来的List对象		        alert(data["msg"]);		        if(data.code == 1){		        	editReplay(replayid);		        }		                },		      error: function(){		          alert("请求出错！");		      }		      });		}				function addkeyword(){			var keyword = $("#keyword2").val();			var id =  $("#replayid").val();			if(keyword == ''){				alert('请输入关键字！');				return false;			}			$.ajax({		        type:"post", //请求方式		        url:"${ctx}/replay/addkeyword" , //请求路径		        data:{"replayid":id,"keyword":keyword},		        cache: false,		        dataType: 'json',		      success:function(data){   		        //弹出返回过来的List对象		        alert(data["msg"]);		        if(data.code == 1){		        $("#keyword2").val('');		        	editReplay(id);		        }		                },		      error: function(){		          alert("请求出错！");		      }		      });		}		function getaddkeyword(){			var keyword = $("#keyword").val();			var word = $("#word").val();			if(word.length == 0 )				return false;			if(keyword.length == 0){				$("#keyword").val(word);			}else{				$("#keyword").val(keyword+","+word);			}			$("#word").val("");		}		function deleteReplay(id) {			$.messager.confirm("删除回复", "确定要删除该回复吗？ ", function() {				/* window.open("${ctx}/deleteComment?id=" + id						, "_self"); */			$.ajax({			        type:"post", //请求方式			        url:"${ctx}/replay/deletereplay" , //请求路径			        data:{"id":id},			        cache: false,			        dataType: 'json',			      success:function(data){   			        //弹出返回过来的List对象			        alert(data["msg"]);			        window.location.reload();			                },			      error: function(){			          alert("请求出错！");			      }			      });			});		}				function addreplays(){			$("#replay-add-form").validate();			$("#replay-add-form").bind(					'submit',					function() {						//校验表单						if (!$(this).valid()) {							return false;						}						var keyword =  $("#keyword").val();						var content =  $("#content").val();					    $.ajax({  					          url: "${ctx}/replay/addreplay" ,  					          type: "POST",  					          data: {"keywords":keyword,  'content':content},					          async: false,						        cache: false, 						        dataType: 'json',					          success:function(data){   						    	  var json = eval(data);						    	  if(json.code == 0) {						    		  alert(data["msg"]);						        	} 						    	  if(json.code == 1){						    		  window.location.reload();						    	  }					          },  					          error: function () {  					              alert("连接错误，请检查网络！");  					          }  					     });  						return false;					});		}	</script></body></html>